#These two line below enable 'sudo modo' (Required to switch between spaces)
#WARNING: Anyway, please check documentacion
yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

# Load all the variables I need from the yabai_env.sh file
# source "/Users/liusam/.config/yabai/yabai_env.sh"

yabai -m config window_placement second_child
# yabai -m config mouse_modifier fn

yabai -m signal --add event=window_destroyed action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"
yabai -m signal --add event=window_minimized action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"
yabai -m signal --add event=application_hidden action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"
yabai -m signal --add event=application_terminated action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"

# yabai -m rule --add app="^.*$" manage=on sticker=off  space=^2



apps_terminal="(kitty)" 
apps_testing="(Google Chrome)" # I test web development stuff with Google Chrome
apps_organization="(Fantastical|Reminders|Notion|Obsidian)"
apps_workspace="(Canva|Microsoft Excel|Microsoft Word|Microsoft PowerPoint)"
apps_media="(Firefox|Preview|IINA|Microsoft Teams|zoom.us|Photos|YouTube Music)" #Generalmente solo usas una de estas apps a la vez
apps_msg="(Microsoft Outlook|net.whatsapp.WhatsApp|Slack)" 
apps_browsing="(Zen)" # 

apps_mgoff_normal="(Clock|Quick Camera|Photo Booth|QuickTime Player|System Preferences|System Settings|Terminal|Godot)" #Apps no administradas por yabai(Por defecto, flat)

yabai -m config layout stack #General 
yabai -m space 1 --layout bsp
yabai -m space 2 --layout bsp


# Cualquier otra apliacion, que se 

yabai -m rule --add app="^${apps_terminal}$"  space=^1 # Terminal 
yabai -m rule --add app="^${apps_testing}$"  space=^2 # Workspace to testing 
yabai -m rule --add app="^${apps_workspace}$"  space=^3 # Worktyping or others (Canva, Word, Excel)
yabai -m rule --add app="^${apps_organization}$"  space=^4 # Organizaci√≥n (Fantastical, Reminders, Notion, etc)
yabai -m rule --add app="^${apps_media}$"  space=^5 # Media (Watch, pdf, videos, images, etc)
yabai -m rule --add app="^${apps_browsing}$"  space=^6 
yabai -m rule --add app="^${apps_msg}$"  space=^8
yabai -m rule --add app="net.whatsapp.WhatsApp"  space=^8
# yabai -m rule --add app="^${}$"  space=^9 

yabai -m rule --add app="^${apps_mgoff_normal}$" manage=off






yabai -m config top_padding 3
yabai -m config bottom_padding 40
yabai -m config left_padding 3
yabai -m config right_padding 3


yabai -m config window_gap 10 #Space between windows
# yabai -m query --windows | grep app

# CONTROL DE BORDES (JankyBorders)
# Dispara el control de bordes cuando se cambia a un nuevo espacio.
# yabai -m config external_bar all:$(sketchybar --query bar | jq .height):35 #https://github.com/FelixKratz/SketchyBar
# borders active_color=0xff06B6D4 inactive_color=0xff494d64 width=7.0 &  #https://github.com/FelixKratz/JankyBorders
