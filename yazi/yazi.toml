[mgr]
show_hidden    = true
ratio          = [ 0, 3, 5 ] # a + b + c = 8
# linemode       = "permissions"
image_quality  = 50

#NOTE: Esto har√° que las imagenes sean mas grande, pero scrolleando entre archivos hara que se sienta
#un ligero retraso. Esto pasa en todas las terminales. Pero por alguna razon KittyTerm va fenomenal.
#No es siente para nada ese retraso.(Cosa que si sentia bastante en Ghostty). 
#NOTE: Update: Now I use KittyTerm
[preview]
max_width       = 1500
max_height      = 1800

[opener]

edit = [
    { run = 'nvim "$@"', block = true, for = "unix" },
]
play = [
    { run = 'open -a "QuickTime Player" "$@"', block = true, for = "unix" },
]
extract = [
	{ run = 'ouch d -y %*', desc = "Extract here with ouch", for = "windows" },
	{ run = 'ouch d -y "$@"', desc = "Extract here with ouch", for = "unix" },
]


[plugin]
# https://github.com/boydaihungst/mediainfo.yazi

  prepend_fetchers = [
    # https://github.com/yazi-rs/plugins/tree/8f1d9711bcd0e48af1fcb4153c16d24da76e732d/git.yazi
    { id = "git", name = "*", run = "git" },
    { id = "git", name = "*/", run = "git" },
  ]

  prepend_preloaders = [
    # https://github.com/wylie102/duckdb.yazi
    # { name = "*.csv", run = "duckdb", multi = false },  
    # { name = "*.tsv", run = "duckdb", multi = false },  
    # { name = "*.json", run = "duckdb", multi = false },  
    # { name = "*.parquet", run = "duckdb", multi = false },
    # { name = "*.txt", run = "duckdb", multi = false },  
    # { name = "*.xlsx", run = "duckdb", multi = false },


    # Replace magick, image, video with mediainfo
    { mime = "{audio,video,image}/*", run = "mediainfo" },
    { mime = "application/subrip", run = "mediainfo" },
    # Adobe Illustrator, Adobe Photoshop is image/adobe.photoshop, already handled above
    { mime = "application/postscript", run = "mediainfo" },
  ]
  prepend_previewers = [
    
    # https://github.com/wylie102/duckdb.yazi
    { name = "*.csv", run = "duckdb" },  
    { name = "*.tsv", run = "duckdb" },  
    { name = "*.json", run = "duckdb" },  
    { name = "*.parquet", run = "duckdb" },  
    { name = "*.txt", run = "duckdb" },  
    { name = "*.xlsx", run = "duckdb" },  
    { name = "*.db", run = "duckdb" },
    { name = "*.duckdb", run = "duckdb" },

    # Replace magick, image, video with mediainfo
    { mime = "{audio,video,image}/*", run = "mediainfo"},
    { mime = "application/subrip", run = "mediainfo" },
    # Adobe Illustrator, Adobe Photoshop is image/adobe.photoshop, already handled above
    { mime = "application/postscript", run = "mediainfo" },


    # Tree previewer for compress archives https://github.com/ndtoan96/ouch.yazi
    { mime = "application/*zip",            run = "ouch" },
    { mime = "application/x-tar",           run = "ouch" },
    { mime = "application/x-bzip2",         run = "ouch" },
    { mime = "application/x-7z-compressed", run = "ouch" },
    { mime = "application/x-rar",           run = "ouch" },
    { mime = "application/vnd.rar",         run = "ouch" },
    { mime = "application/x-xz",            run = "ouch" },
    { mime = "application/xz",              run = "ouch" },
    { mime = "application/x-zstd",          run = "ouch" },
    { mime = "application/zstd",            run = "ouch" },
    { mime = "application/java-archive",    run = "ouch" },
  ]
  # There are more extensions which are supported by mediainfo.
  # Just add file's MIME type to `previewers`, `preloaders` above.
  # https://mediaarea.net/en/MediaInfo/Support/Formats

# For a large file like Adobe Illustrator, Adobe Photoshop, etc
# you may need to increase the memory limit if no image is rendered.
# https://yazi-rs.github.io/docs/configuration/yazi#tasks
[tasks]
  image_alloc      = 1073741824        # = 1024*1024*1024 = 1024MB
